{"version":3,"sources":["Components/Dialogs/Dialogs.module.css","Components/Dialogs/DialogItem/DialogItem.tsx","Components/Dialogs/Message/Message.tsx","Components/Dialogs/AddMessageForm/AddMessageForm.tsx","Components/Dialogs/Dialogs.tsx","hoc/withAuthRedirectComponent.tsx","Components/Dialogs/DialogsContainer.tsx"],"names":["module","exports","DialogItem","props","className","s","dialog","active","to","id","name","Message","message","maxLength100","maxLengthCreator","AddMessageFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","component","Textarea","validate","required","placeholder","Dialogs","state","dialogPage","dialogsElements","dialogs","map","d","messagesElements","messages","m","isAuth","dialogsItems","values","sendMessage","newMessageBody","mapStateToProps","auth","compose","Component","connect","restProps","dispatch","sendMessageCreator"],"mappings":"2FACAA,EAAOC,QAAU,CAAC,QAAU,yBAAyB,aAAe,8BAA8B,OAAS,wBAAwB,OAAS,wBAAwB,SAAW,0BAA0B,QAAU,2B,6FCepMC,EATI,SAACC,GAChB,OACI,qBAAKC,UAAWC,IAAEC,OAAS,IAAMD,IAAEE,OAAnC,SACI,cAAC,IAAD,CAASC,GAAI,YAAcL,EAAMM,GAAjC,SAAsCN,EAAMO,UCIzCC,EARC,SAACR,GACb,OACI,qBAAKC,UAAWC,IAAEO,QAAlB,SACKT,EAAMS,W,0CCDfC,EAAcC,YAAiB,KAiBtBC,EAAsBC,YAA+B,CAACC,KAAM,wBAAtCD,EAhBsC,SAACb,GACtE,OACI,uBAAMe,SAAUf,EAAMgB,aAAtB,UACI,8BACI,cAACC,EAAA,EAAD,CAAOC,UAAWC,IAAUC,SAAU,CAACC,IAAUX,GAC1CH,KAAM,iBAAkBe,YAAY,yBAE/C,8BACI,kDCsBDC,EA9BC,SAACvB,GACb,IAAIwB,EAAQxB,EAAMyB,WACdC,EAAkBF,EAAMG,QAAQC,KAAI,SAAAC,GAAC,OAAI,cAAC,EAAD,CAAYtB,KAAMsB,EAAEtB,KAAiBD,GAAIuB,EAAEvB,IAAZuB,EAAEvB,OAC1EwB,EAAmBN,EAAMO,SAASH,KAAI,SAAAI,GAAC,OAAI,cAAC,EAAD,CAASvB,QAASuB,EAAEvB,QAAoBH,GAAI0B,EAAE1B,IAAZ0B,EAAE1B,OASnF,OAAKN,EAAMiC,OAGP,gCACI,sBAAKhC,UAAWC,IAAEyB,QAAlB,UACI,qBAAK1B,UAAWC,IAAEgC,aAAlB,SACKR,IAEL,qBAAKzB,UAAWC,IAAE6B,SAAlB,SACI,8BAAMD,SAGd,cAAClB,EAAD,CAAqBG,SAhBT,SAACoB,GACjBnC,EAAMoC,YAAYD,EAAOE,sBAGH,cAAC,IAAD,CAAUhC,GAAI,Y,+BCTtCiC,EAAkB,SAACd,GACrB,MAAO,CACHS,OAAQT,EAAMe,KAAKN,SCsBZO,uBDlBR,SAA6BC,GAUhC,OAFiCC,YAAQJ,EAARI,EANP,SAAC1C,GAAgC,IAClDiC,EAAwBjC,EAAxBiC,OAAWU,EADsC,YACzB3C,EADyB,YAEtD,OAAKiC,EACE,cAACQ,EAAD,eAAgBE,IADH,cAAC,IAAD,CAAUtC,GAAI,gBCgBrCqC,aArBiB,SAAClB,GACnB,MAAO,CACHC,WAAYD,EAAMC,WAClBQ,OAAQT,EAAMe,KAAKN,WAGF,SAACW,GACtB,MAAO,CAEHR,YAAa,SAACC,GACVO,EAASC,YAAmBR,SASzBG,CAGbjB","file":"static/js/4.93ee0216.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__3tR3i\",\"dialogsItems\":\"Dialogs_dialogsItems__1OXY2\",\"dialog\":\"Dialogs_dialog__2vn4p\",\"active\":\"Dialogs_active__2I8hT\",\"messages\":\"Dialogs_messages__25l4V\",\"message\":\"Dialogs_message__1o67z\"};","import React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport { DialogType } from \"../../../redux/dialogs-reducer\";\r\nimport s from './../Dialogs.module.css'\r\n\r\n\r\n\r\nconst DialogItem = (props: DialogType) => {\r\n    return (\r\n        <div className={s.dialog + ' ' + s.active}>\r\n            <NavLink to={'/dialogs/' + props.id}>{props.name}</NavLink>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default DialogItem;","import React from \"react\";\r\nimport s from './../Dialogs.module.css'\r\nimport {MessageType} from \"../../../redux/dialogs-reducer\";\r\n\r\n\r\n\r\nconst Message = (props: MessageType) => {\r\n    return (\r\n        <div className={s.message}>\r\n            {props.message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message;","import React from \"react\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {Textarea} from \"../../common/FormControls/FormsControls\";\r\nimport {maxLengthCreator, required} from \"../../../utils/validators/validators\";\r\n\r\nexport type FormDataDialogsType = {\r\n    newMessageBody: string,\r\n}\r\nlet maxLength100= maxLengthCreator(100)\r\nconst AddMessageForm: React.FC<InjectedFormProps<FormDataDialogsType>> = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field component={Textarea} validate={[required, maxLength100]}\r\n                       name={'newMessageBody'} placeholder='Enter your message'/>\r\n            </div>\r\n            <div>\r\n                <button>Send</button>\r\n            </div>\r\n        </form>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport const AddMessageFormRedux = reduxForm<FormDataDialogsType>({form: 'dialogAddMessageForm'})(AddMessageForm)","import React from \"react\";\r\nimport s from './Dialogs.module.css'\r\nimport DialogItem from \"./DialogItem/DialogItem\";\r\nimport Message from \"./Message/Message\";\r\nimport {DialogsPropsType} from \"./DialogsContainer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {AddMessageFormRedux, FormDataDialogsType} from \"./AddMessageForm/AddMessageForm\";\r\n\r\n\r\nconst Dialogs = (props: DialogsPropsType) => {\r\n    let state = props.dialogPage\r\n    let dialogsElements = state.dialogs.map(d => <DialogItem name={d.name} key={d.id} id={d.id}/>);\r\n    let messagesElements = state.messages.map(m => <Message message={m.message} key={m.id} id={m.id}/>)\r\n\r\n\r\n\r\n\r\n    let addNewMessage = (values: FormDataDialogsType) => {\r\n        props.sendMessage(values.newMessageBody)\r\n    }\r\n\r\n    if (!props.isAuth) return <Redirect to={'/login'}/>;//требует стартовый стейт, иначе undefined\r\n\r\n    return (\r\n        <div>\r\n            <div className={s.dialogs}>\r\n                <div className={s.dialogsItems}>\r\n                    {dialogsElements}\r\n                </div>\r\n                <div className={s.messages}>\r\n                    <div>{messagesElements}</div>\r\n                </div>\r\n            </div>\r\n            <AddMessageFormRedux onSubmit={addNewMessage}/>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Dialogs;\r\n","import React, {ComponentType} from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\nimport {PropsType} from \"../Components/Profile/ProfileContainer\";\r\nimport {DialogsPropsType} from \"../Components/Dialogs/DialogsContainer\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from '../redux/redux-store';\r\n\r\n\r\ntype mapStateToPropsType = {\r\n    isAuth: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): mapStateToPropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport function withAuthRedirect<T>(Component: ComponentType<T>) {\r\n\r\n    const RedirectComponent = (props: mapStateToPropsType) => {\r\n        let {isAuth, ...restProps} = props\r\n        if (!isAuth) return <Redirect to={'/login'}/>;\r\n        return <Component  {...restProps as T}/>\r\n    }\r\n\r\n    let ConnectedRedirectComponent = connect(mapStateToProps)(RedirectComponent)\r\n\r\n    return ConnectedRedirectComponent\r\n}","import React from \"react\";\r\nimport {InitialStateType, sendMessageCreator} from \"../../redux/dialogs-reducer\";\r\nimport Dialogs from \"./Dialogs\";\r\nimport {connect} from \"react-redux\";\r\nimport {compose, Dispatch} from \"redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirectComponent\";\r\n\r\ntype MapStateToPropsType = {\r\n    dialogPage: InitialStateType,\r\n    isAuth: boolean,\r\n}\r\ntype MapDispatchToPropsType = {\r\n    sendMessage: (newMessageBody:string) => void,\r\n}\r\nexport type DialogsPropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nlet mapStateToProps = (state: AppStateType): MapStateToPropsType => {\r\n    return {\r\n        dialogPage: state.dialogPage,\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\nlet mapDispatchToProps = (dispatch: Dispatch): MapDispatchToPropsType => {\r\n    return {\r\n\r\n        sendMessage: (newMessageBody:string) => {\r\n            dispatch(sendMessageCreator(newMessageBody))\r\n        }\r\n    }\r\n}\r\n\r\n\r\n//const DialogsContainer = withAuthRedirect(connect(mapStateToProps, mapDispatchToProps)(Dialogs));\r\n// export default DialogsContainer\r\n\r\nexport default compose<React.ComponentType>(\r\n    withAuthRedirect\r\n    ,connect(mapStateToProps, mapDispatchToProps)\r\n)(Dialogs);"],"sourceRoot":""}